Универсальный адаптивный интерфейс для редактора интерактивных вебтунов
Этот документ описывает интерфейс редактора графов историй, который одинаково удобен на мобильных устройствах и на настольных компьютерах. Принципы адаптивности позволяют изменить только расположение и способ вызова элементов управления, сохраняя общую логику работы. Упор делается на максимальную видимость графа и простоту взаимодействия, а редактирование «горячих зон» (hot‑spots) ограничивается перемещением, изменением размера и изменением формы. Дополнительных зон пользователь не создаёт и не удаляет — их количество строго соответствует количеству исходящих связей узла выбора и управляется самой схемой.
1. Основные принципы
Приоритет графа. Большая часть экрана отведена под визуализацию узлов и связей, чтобы автор видел общую структуру. Любые панели и меню появляются только по требованию и временно.
Адаптивность. Интерфейс реагирует на ширину экрана и тип указателя (коорст/мелкий), меняя расположение панелей. На мобильных — крупные кнопки и выезжающие панели, на десктопах — боковые панели, возможность использования мыши и клавиатуры.
Один набор действий. Пользовательские функции одинаковы на всех устройствах: добавление изображений и узлов выбора, создание и удаление связей, управление состоянием (undo/redo), редактирование зон выбора. Различаются лишь способы ввода (жесты против мыши) и размещение кнопок.
Простое редактирование зон. Хот‑споты автоматически создаются и исчезают в соответствии с количеством исходящих связей. Пользователь может только перемещать зоны, менять их размер и форму (круг/овал ↔ прямоугольник). Создание или удаление зон в интерфейсе не предусмотрено.
2. Структура интерфейса
2.1 Область графа
Занимает 60–80 % высоты экрана. На широких мониторах область может быть увеличена за счёт боковых панелей; на телефонах она занимает почти весь экран.
Масштабирование:
На сенсорных устройствах — жест «щипок» (pinch‑to‑zoom).
На ПК — Ctrl + колесо мыши. Альтернативно можно добавить иконку‑ползунок для масштабирования.
Перемещение холста:
На мобильных — двумя пальцами: один палец предназначен для перемещения узлов, два пальца — для панорамирования всей схемы.
На десктопе — правой кнопкой мыши или удержанием пробела и перетаскиванием. Также можно включить кнопку «панорамирование», которая временно отключает выбор узлов.
Взаимодействие с узлами: короткий тап/клик выделяет узел, длительное нажатие (на мобильном) или двойной клик (на десктопе) открывает контекстные действия (например, редактировать узел).
2.2 Панель инструментов
Панель содержит основные команды и адаптируется под тип устройства:
Функция	Десктоп	Мобильный вариант
Добавить изображение	Кнопка на верхнем или боковом тулбаре.	Крупная кнопка в нижней панели; открывает галерею.
Добавить узел выбора	Кнопка; создаёт узел и сразу открывает редактор зон.	Крупная кнопка; переводит в режим редактирования зон.
Создать/разорвать связь	Режим, включаемый кнопкой или клавишей (например, Shift). В режиме связывания щёлкают сначала по исходному узлу, затем по целевому; повторное подключение рвёт связь.	Отдельная крупная кнопка переключает режим; в режиме выделения пользователь поочерёдно нажимает два узла.
Undo/Redo	Горячие клавиши (Ctrl+Z, Ctrl+Y); кнопки на панели.	Кнопки на нижней панели (стрелки назад/вперёд).
Сохранить/Опубликовать	Кнопка или пункт меню; сохраняет проект или публикует его.	Кнопка в нижнем баре; при сохранении отображает всплывающее уведомление.
Подсказки с горячими клавишами отображаются только на десктопах. На мобильных горячие клавиши не показаны.
2.3 Галерея изображений
Назначение. Позволяет выбирать изображение из загруженных файлов для добавления в граф.
На мобильных — выезжающая снизу шторка, занимающая ~60–70 % экрана. Панель содержит сетку превью и закрывается свайпом вниз или выбором изображения.
На десктопах — боковая панель (справа или слева), которая открывается и закрывается кнопкой. Можно закрепить панель открытой для удобства.
Выбор изображения. Нажатие по миниатюре добавляет картинку на холст; по умолчанию она размещается рядом с выбранным узлом или в центре видимой области.
2.4 Режим редактирования зон выбора (Hot‑spot editor)
Редактор вызывается при выборе узла выбора и автоматически отображает изображение этого узла. Количество зон соответствует исходящим связям и управляется системой. Пользователь может:
Перемещать зоны. Касание/клик по зоне делает её активной; перетаскивание перемещает по изображению.
Изменять размер. При активации зоны появляются маркеры по углам и/или сторонам; перетягивание этих маркеров изменяет размеры области.
Изменять форму. Переключатель формы (иконка на панели свойств или на самом хот‑споте) позволяет переключаться между кругом/овалом и прямоугольником. При выборе круглой формы зона отображается овалом; при выборе прямоугольника — прямоугольником.
Выход из редактора. Кнопка «Готово» (в верхней или нижней части панели) закрывает режим и возвращает пользователя к общему виду графа. На мобильных можно также закрыть панель свайпом вниз.
Важное ограничение: пользователь не может самостоятельно создавать или удалять зоны. Количество зон равно числу исходящих связей узла и изменяется при создании или удалении этих связей.
Размещение редактора
На мобильных: редактор открывается в полноэкранном модальном окне поверх графа, чтобы пользователь мог сосредоточиться на деталях изображения. Панель закрывается нажатием «Готово» или жестом.
На десктопах: редактор может открываться как всплывающее окно или фиксированная боковая панель. Пользователь может продолжать видеть граф, что позволяет легко ориентироваться.
3. Взаимодействие с устройствами
3.1 Сенсорные устройства (смартфоны/планшеты)
Используются пальцевые жесты: pinch‑to‑zoom, двухпальцевое перемещение холста, одиночный палец для перетаскивания узлов.
Панель инструментов закреплена снизу; элементы крупные и легко нажимаемые.
Галерея изображений и редактор зон открываются в виде шторок, занимающих большую часть экрана.
Горячие клавиши отсутствуют; все действия доступны через кнопки и жесты.
3.2 Десктопные устройства
Используются мышь и клавиатура. Масштабирование — Ctrl+колёсико; панорамирование — правой кнопкой или пробел + перетаскивание.
Панель инструментов может быть расположена сверху или в виде боковой колонки. Предусмотрена возможность закрепить или свернуть её.
Галерея изображений и редактор зон открываются в виде боковых панелей или модальных окон, не закрывая полностью граф.
Поддерживаются горячие клавиши для быстрых действий (Undo/Redo, режим связывания и др.), но их использование не обязательно.
4. Рекомендации по реализации
Компонентность. Разделяйте интерфейс на независимые React‑компоненты: GraphArea, Toolbar, ImageGallery, HotspotEditor. Управляйте состоянием через общий контекст или менеджер состояния (например, Zustand или Redux).
Адаптивные стили. Используйте CSS‑медиазапросы (@media (min-width: 768px)) и проверку типа указателя (pointer: coarse/fine) для изменения размеров, расположения и видимости элементов. Это позволит динамически переключать мобильную и десктопную раскладки.
События ввода. Реализуйте обработчики для touch и mouse событий. Библиотеки react-use-gesture, hammerjs или собственные слушатели помогут корректно работать с pinch‑жестами и двухпальцевым перетягиванием.
Онбординг и подсказки. Включите обучающие подсказки при первом запуске: объясните жесты масштабирования, панорамирования, назначение кнопок и особенности редактирования зон. На десктопе показывайте подсказки горячих клавиш при наведении на кнопки.
Доступность. Обеспечьте достаточный контраст, читаемый шрифт, крупные области нажатия. Позвольте пользоваться интерфейсом при помощи клавиатуры (ввод с клавиатуры, Tab‑навигация) там, где возможно.
5. Заключение
Этот документ предлагает единую, адаптивную структуру интерфейса для редактора интерактивных вебтунов. Он сохраняет удобство мобильной версии — крупные кнопки, шторки и жесты — и дополняет её настольными возможностями — горячими клавишами, панорамированием мышью, расширенными панелями. Количество горячих точек на изображении строго привязано к числу исходящих связей, а пользователю доступны лишь их перемещение, масштабирование и изменение формы, что упрощает работу и исключает лишние действия. Такой подход позволит единожды реализовать функциональность и поддерживать её на всех устройствах без дублирования кода.
